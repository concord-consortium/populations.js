// Generated by CoffeeScript 1.7.1
(function() {
  var Environment, Rule, col, env, row, sunlight, _i, _j;

  Environment = require('models/environment');

  Rule = require('models/rule');

  env = new Environment({
    columns: 58,
    rows: 49,
    imgPath: "images/environments/sun3levels.png",
    seasonLengths: [30, 30, 15, 10],
    barriers: [[0, 0, 95, 490], [545, 0, 40, 490], [0, 0, 580, 65], [0, 130, 580, 70], [0, 260, 580, 70], [0, 400, 580, 90]],
    wrapEastWest: false,
    wrapNorthSouth: false
  });

  for (col = _i = 0; _i <= 58; col = ++_i) {
    for (row = _j = 0; _j <= 49; row = ++_j) {
      sunlight = (function() {
        switch (false) {
          case !(row < 15):
            return 7;
          case !(row < 30):
            return 6;
          default:
            return 5;
        }
      })();
      env.set(col, row, "sunlight", sunlight);
    }
  }

  env.addRule(new Rule({
    test: function(agent) {
      return agent.get('age') > (agent.species.defs.SPROUT_AGE + 4);
    },
    action: function(agent) {
      var diff, health, size;
      size = agent.get('size');
      sunlight = agent.get('sunlight');
      diff = Math.abs((11 - size) - sunlight);
      health = 1 - (diff / 20);
      return agent.set('health', health);
    }
  }));

  env.addRule(new Rule({
    action: function(agent) {
      var flowers;
      flowers = agent.get('age') > agent.species.defs.MATURITY_AGE && agent.get('health') >= 0.99;
      return agent.set('has flowers', flowers);
    }
  }));

  require.register("environments/sunlight-3-flowerboxes", function(exports, require, module) {
    return module.exports = env;
  });

}).call(this);
